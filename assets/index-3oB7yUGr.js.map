{"version":3,"file":"index-3oB7yUGr.js","sources":["../../src/utils/shake-camera.js","../../src/utils/sounds.js","../../src/entities/moving-infected.js","../../src/utils/digits-code.js","../../src/scenes/exterior.js","../../src/entities/idle-infected.js","../../src/scenes/intro.js","../../src/scenes/reception.js","../../src/scenes/corridor.js","../../src/scenes/room.js","../../src/main.js"],"sourcesContent":["// Functions to adapt the camera\n\nconst overlay = document.getElementById('damage-overlay');\n\nfunction flashRed() {\n    overlay.style.opacity = '0.8';\n\n    setTimeout(() => {\n        overlay.style.opacity = '0';\n        overlay.classList.add('fade-out');\n        setTimeout(() => {\n            overlay.classList.remove('fade-out');\n        }, 1000);\n    }, 200);\n}\n\nexport { flashRed };","// File to manage all the sounds in the game\n\nimport * as THREE from 'three';\n\n// ------------------- Variables -------------------\n\n// Listener and audio loader\nconst listener = new THREE.AudioListener();\nconst audioLoader = new THREE.AudioLoader();\n\n// Background music\nconst exteriorBackgroundMusic = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/abadoned-pyramid-atmo-orchestral-and-drone-sad-mood-9237.mp3', (buffer) => {\n    exteriorBackgroundMusic.setBuffer(buffer);\n    exteriorBackgroundMusic.setLoop(true);\n    exteriorBackgroundMusic.setVolume(0.1);\n});\n\nconst meetingBrotherMusic = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/a-rainy-day-248712.mp3', (buffer) => {\n    meetingBrotherMusic.setBuffer(buffer);\n    meetingBrotherMusic.setLoop(true);\n    meetingBrotherMusic.setVolume(0.2);\n});\n\n// Sound effects\nconst scaryViolins = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/scaryviolins-6829.mp3', (buffer) => {\n    scaryViolins.setBuffer(buffer);\n    scaryViolins.setLoop(true);\n    scaryViolins.setVolume(0.8);\n});\n\nconst shepardTone = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/shepard-effect-edit.mp3', (buffer) => {\n    shepardTone.setBuffer(buffer);\n    shepardTone.setLoop(true);\n    shepardTone.setVolume(0.6);\n});\n\nconst biteScarySound = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/cringe-scare-47561.mp3', (buffer) => {\n    biteScarySound.setBuffer(buffer);\n    biteScarySound.setVolume(0.2);\n});\n\nconst biteSound = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/zombie-bite-96528.mp3', (buffer) => {\n    biteSound.setBuffer(buffer);\n    biteSound.setVolume(0.5);\n});\n\nconst paperSound = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/paper-245786.mp3', (buffer) => {\n    paperSound.setBuffer(buffer);\n    paperSound.setVolume(0.5);\n});\n\nconst doorSound = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/closing-metal-door-44280.mp3', (buffer) => {\n    doorSound.setBuffer(buffer);\n    doorSound.setVolume(0.5);\n});\n\nconst lockedDoorSound = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/door-close-79921.mp3', (buffer) => {\n    lockedDoorSound.setBuffer(buffer);\n    lockedDoorSound.setVolume(0.4);\n});\n\nconst corpseNoise = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/dropping-bag-95101.mp3', (buffer) => {\n    corpseNoise.setBuffer(buffer);\n    corpseNoise.setVolume(0.5);\n});\n\nconst footsteps = new THREE.Audio(listener);\naudioLoader.load('assets/sounds/footsteps.mp3', (buffer) => {\n    footsteps.setBuffer(buffer);\n    footsteps.setVolume(0.4);\n    footsteps.setLoop(true);\n});\n\n// Positionnal sound effects\nconst infectedSound = new THREE.PositionalAudio(listener);\naudioLoader.load('assets/sounds/zombie-1-22336.mp3', (buffer) => {\n    infectedSound.setBuffer(buffer);\n    infectedSound.setLoop(true);\n    infectedSound.setRefDistance(20);\n    infectedSound.setVolume(0.3);\n});\n\nconst lampSound = new THREE.PositionalAudio(listener);\naudioLoader.load('assets/sounds/fluorescent-lamp-flickering-17625.mp3', (buffer) => {\n    lampSound.setBuffer(buffer);\n    lampSound.setRefDistance(3);\n    lampSound.setVolume(0.9);\n    lampSound.setLoop(true);\n});\n\n// ------------------- Functions -------------------\n\nfunction addListenerToCamera(camera) {\n    camera.add(listener);\n}\n\nfunction addSoundToInfected(infected) {\n    infected.add(infectedSound);\n}\n\nfunction addSoundToLamp(lamp) {\n    lamp.add(lampSound);\n    lampSound.play();\n}\n\nfunction playExteriorBackgroundMusic() {\n    exteriorBackgroundMusic.play();\n}\n\nfunction playMeetingBrotherMusic() {\n    meetingBrotherMusic.play();\n}\n\nfunction playInfectedSound() {\n    infectedSound.play();\n}\n\nfunction stopBackgroundMusic() {\n    exteriorBackgroundMusic.stop();\n    meetingBrotherMusic.stop();\n    infectedSound.stop();\n}\n\nfunction playBiteSound() {\n    biteSound.play();\n    biteScarySound.play();\n}\n\nfunction playInfectedChase() {\n    stopBackgroundMusic();\n    scaryViolins.play();\n    shepardTone.play();\n    infectedSound.play();\n}\n\nfunction stopInfectedChase() {\n    scaryViolins.stop();\n    shepardTone.stop();\n    infectedSound.stop();\n    playBiteSound();\n    playExteriorBackgroundMusic();\n}\n\nfunction playPaperSound() {\n    paperSound.play();\n}\n\nfunction playDoorSound() {\n    doorSound.play();\n}\n\nfunction playLockedDoorSound() {\n    lockedDoorSound.play();\n}\n\nfunction playCorpseNoise() {\n    corpseNoise.play();\n}\n\nfunction playFootsteps() {\n    if (!footsteps.isPlaying) {\n        footsteps.play();\n    }\n}\n\nfunction pauseFootsteps() {\n    footsteps.pause();\n}\n\n// ------------------- Export -------------------\n\nexport {\n    addListenerToCamera, playExteriorBackgroundMusic, stopBackgroundMusic,\n    playInfectedChase, stopInfectedChase, playBiteSound, addSoundToInfected, playPaperSound,\n    playDoorSound, playLockedDoorSound, playCorpseNoise, playFootsteps, pauseFootsteps,\n    addSoundToLamp, playMeetingBrotherMusic, playInfectedSound\n};","// File for the infected model\n\nimport * as THREE from 'three';\nimport { flashRed } from '../utils/shake-camera';\nimport { addSoundToInfected, stopInfectedChase } from '../utils/sounds';\n\nlet model, mixer;\n\nlet idleAction, walkAction, walkWithArmsAction, runAction, attackAction, fallBackwardAction, fallForwardAction;\nlet actions;\n\nlet isFallingBack = false;\nlet isDead = false;\nconst infectedSpeed = 2;\n\n// Dialogue\nconst infectedBite = document.getElementById('infected-bite');\n\n// Animations names:\n// NOT USEFUL (animations that move the character on their own):\n// walk with arms: Walk\n// walk: Walk1\n// run: Run\n\n// USEFUL (animations that don't move the character position):\n// idle: Idle\n// walk in place: Walk1_InPlace\n// walk in place with arms: Walk2_InPlace\n// run in place: Run_InPlace\n// attack: Attack\n// falling back: FallingBack\n// falling forward: FallingForward\n\n\nfunction loadInfected(infectedFile, loader, scene, state = \"Run_InPlace\") {\n    loader.load(infectedFile, (gltf) => {\n        model = gltf.scene;\n\n        // Manual positioning\n        model.position.x = -19;\n        model.position.z = 1.5;\n\n        // Sound for the infected\n        addSoundToInfected(model);\n\n        scene.add(model);\n\n        model.traverse(function (object) {\n            if (object.isMesh) object.castShadow = true;\n        });\n\n        const animations = gltf.animations;\n\n        mixer = new THREE.AnimationMixer(model);\n\n        idleAction = mixer.clipAction(animations[0]);\n        walkAction = mixer.clipAction(animations[1]);\n        walkWithArmsAction = mixer.clipAction(animations[2]);\n        runAction = mixer.clipAction(animations[3]);\n        attackAction = mixer.clipAction(animations[4]);\n        fallBackwardAction = mixer.clipAction(animations[5]);\n        fallForwardAction = mixer.clipAction(animations[6]);\n\n        actions = [idleAction, walkAction, walkWithArmsAction, runAction, attackAction, fallBackwardAction, fallForwardAction];\n\n        if (state === 'Idle') {\n            idleAction.play();\n        }\n        else if (state === 'Walk1_InPlace') {\n            walkAction.play();\n        }\n        else if (state === 'Walk2_InPlace') {\n            walkWithArmsAction.play();\n        }\n        else if (state === 'Run_InPlace') {\n            runAction.play();\n        }\n        else if (state === 'Attack') {\n            attackAction.play();\n        }\n    });\n}\n\n// Animation transitions\nfunction fromIdleToWalk() {\n    prepareCrossFade(idleAction, walkAction, 0.5);\n}\nfunction fromWalkToRun() {\n    prepareCrossFade(walkAction, runAction, 2.5);\n}\nfunction fromWalkToWalkWithArms() {\n    prepareCrossFade(idleAction, walkWithArmsAction, 0.5);\n}\nfunction fromIdleToWalkWithArms() {\n    prepareCrossFade(idleAction, walkWithArmsAction, 0.5);\n}\nfunction fromWalkWithArmsToRun() {\n    prepareCrossFade(walkWithArmsAction, runAction, 2.5);\n}\nfunction fromRunToWalk() {\n    prepareCrossFade(runAction, walkAction, 5.0);\n}\nfunction fromRunToWalkWithArms() {\n    prepareCrossFade(runAction, walkWithArmsAction, 5.0);\n}\nfunction fromWalkToIdle() {\n    prepareCrossFade(walkAction, idleAction, 1.0);\n}\nfunction fromWalkWithArmsToIdle() {\n    prepareCrossFade(walkWithArmsAction, idleAction, 1.0);\n}\nfunction fromRunTofallBack() {\n    runAction.stop();\n    fallBackwardAction.loop = THREE.LoopOnce;\n    fallBackwardAction.clampWhenFinished = true;\n    fallBackwardAction.play();\n}\n\nfunction prepareCrossFade(startAction, endAction, duration) {\n    // If the current action is 'idle' (duration 4 sec), execute the crossfade immediately;\n    // else wait until the current action has finished its current loop\n\n    if (startAction === idleAction) {\n        executeCrossFade(startAction, endAction, duration);\n    }\n    else {\n        synchronizeCrossFade(startAction, endAction, duration);\n    }\n}\n\nfunction synchronizeCrossFade(startAction, endAction, duration) {\n    mixer.addEventListener('loop', onLoopFinished);\n    function onLoopFinished(event) {\n        if (event.action === startAction) {\n            mixer.removeEventListener('loop', onLoopFinished);\n            executeCrossFade(startAction, endAction, duration);\n        }\n    }\n}\n\nfunction executeCrossFade(startAction, endAction, duration) {\n    // Not only the start action, but also the end action must get a weight of 1 before fading\n    // (concerning the start action this is already guaranteed in this place)\n    setWeight(endAction, 1);\n    endAction.time = 0;\n\n    // Crossfade with warping - you can also try without warping by setting the third parameter to false\n    startAction.crossFadeTo(endAction, duration, true);\n}\n\n// This function is needed, since animationAction.crossFadeTo() disables its start action and sets\n// the start action's timeScale to ((start animation's duration) / (end animation's duration))\n\nfunction setWeight(action, weight) {\n    action.enabled = true;\n    action.setEffectiveWeight(weight);\n    if (!action.isRunning()) {\n        action.play();\n    }\n}\n\nfunction infectedLoop(deltaTime, playerCollider) {\n    if (!model) {\n        return;\n    }\n    if (isDead) {\n        return;\n    }\n    // Check for collision with player\n    if (playerCollider.start.distanceTo(model.position) < 2 && !isFallingBack) {\n        stopInfectedChase();\n        fromRunTofallBack();\n        flashRed();\n        isFallingBack = true;\n        return;\n    }\n\n    if (isFallingBack) {\n        if (mixer) {\n            mixer.update(deltaTime);\n            if (!fallBackwardAction.isRunning()) {\n                isFallingBack = false;\n                isDead = true;\n                console.log(\"Infected is dead\");\n                infectedBite.style.visibility = 'visible';\n                setTimeout(() => {\n                    infectedBite.style.visibility = 'hidden';\n                }, 5000);\n            }\n        }\n        return;\n    }\n    if (mixer) {\n        mixer.update(deltaTime);\n    }\n    const playerPosition = playerCollider.end;\n    const direction = new THREE.Vector3();\n\n    // only X and Z vectors are needed\n    direction.subVectors(new THREE.Vector3(playerPosition.x, model.position.y, playerPosition.z), model.position).normalize();\n\n    model.position.add(direction.multiplyScalar(infectedSpeed * deltaTime));\n\n    const lookAt = new THREE.Vector3(playerPosition.x, model.position.y, playerPosition.z);\n    model.lookAt(lookAt);\n}\n\nfunction removeInfected() {\n    if (mixer) {\n        mixer.stopAllAction();\n        mixer.uncacheRoot(model);\n        mixer = null;\n    }\n\n    if (model) {\n        model.traverse((object) => {\n            if (object.isMesh) {\n                object.geometry.dispose();\n                if (object.material.isMaterial) {\n                    object.material.dispose();\n                } else if (Array.isArray(object.material)) {\n                    object.material.forEach((material) => material.dispose());\n                }\n            }\n        });\n\n        if (model.parent) {\n            model.parent.remove(model);\n        }\n\n        model = null;\n    }\n\n    // Reset states\n    isDead = false;\n    isFallingBack = false;\n}\n\n\nexport {\n    loadInfected, fromIdleToWalk, fromWalkToRun,\n    fromWalkToWalkWithArms, fromIdleToWalkWithArms, fromWalkWithArmsToRun,\n    fromRunToWalk, fromRunToWalkWithArms, fromWalkToIdle,\n    fromWalkWithArmsToIdle, infectedLoop, removeInfected\n};","import { spawnInfected } from \"../main\";\nimport { getKey, removeCodeTrigger } from \"../scenes/exterior\";\nimport { playInfectedChase } from \"./sounds\";\n\nconst validCode = \"2231\";\n\nconst codeInput = document.getElementById('code-input');\nconst solvedCodeText = document.getElementById('solved-code-text');\n\n\nfunction clearCode() {\n    codeInput.innerText = '';\n    removeCodeListener();\n}\n\nfunction checkCode() {\n    if (codeInput.innerText === validCode) {\n        return true;\n    }\n    if (codeInput.innerText.length === 4) {\n        codeInput.innerText = '';\n    }\n    return false;\n}\n\nfunction addDigit(digit) {\n    if (codeInput.innerText.length < 4) {\n        codeInput.innerText += digit;\n    }\n}\n\nfunction keyHandler(event) {\n    if (event.key >= '0' && event.key <= '9') {\n        addDigit(event.key);\n    }\n    if (event.key === 'Enter') {\n        if (checkCode()) {\n            console.log('Code accepted');\n            codeInput.innerText = 'Correct!';\n            solvedCodeText.style.visibility = 'visible';\n            getKey();\n            spawnInfected();\n            playInfectedChase();\n            setTimeout(() => {\n                removeCodeTrigger();\n                codeInput.innerText = '';\n                solvedCodeText.style.visibility = 'hidden';\n            }, 3000);\n        } else {\n            console.log('Code rejected');\n            codeInput.innerText = 'Wrong!';\n            setTimeout(() => {\n                codeInput.innerText = '';\n            }, 1000);\n        }\n    }\n}\n\nfunction useCode() {\n    document.addEventListener('keyup', keyHandler);\n}\n\nfunction removeCodeListener() {\n    document.removeEventListener('keyup', keyHandler);\n}\n\n\nexport { checkCode, clearCode, addDigit, useCode };","// File for the exterior scene of the game.\n\nimport * as THREE from 'three';\n\nimport { loadNewRoom } from '../main';\nimport { clearCode, useCode } from '../utils/digits-code';\nimport { addSoundToLamp, playCorpseNoise, playDoorSound, playLockedDoorSound, playPaperSound } from '../utils/sounds';\n\n// ------------------- Variables -------------------\n\n// Flag to track if the door key has been found\nlet doorKeyFound = false;\n\n// Flags to track if player is inside the trigger\nlet playerInDoorTriggerZone = false;\nlet playerInCorpseTriggerZone = false;\nlet playerInCodeTriggerZone = false;\nlet playerInFileTriggerZone = false;\nlet playerInReportTriggerZone = false;\nlet playerInCharlesNoteTriggerZone = false;\n\n// Door trigger\nconst doorTrigger = new THREE.Box3(\n    // Min corner (xMin, yMin, zMin)\n    new THREE.Vector3(-7.55, 0, -5.5),\n    // Max corner (xMax, yMax, zMax)\n    new THREE.Vector3(-5, 3, 0.5)\n);\n\nconst corpseTrigger = new THREE.Box3(\n    new THREE.Vector3(-31, 0, -28),\n    new THREE.Vector3(-29, 3, -24)\n);\n\n// Code trigger\nconst codeTrigger = new THREE.Box3(\n    new THREE.Vector3(-37, 0, 0),\n    new THREE.Vector3(-33, 3, 3.5)\n);\n\n// File trigger\nconst fileTrigger = new THREE.Box3(\n    new THREE.Vector3(-13, 0, -60),\n    new THREE.Vector3(-10.5, 3, -57)\n);\n\n// Report trigger\nconst reportTrigger = new THREE.Box3(\n    new THREE.Vector3(-8, 0, -10),\n    new THREE.Vector3(-5, 3, -7.5)\n);\n\n// Charles note trigger\nconst charlesNoteTrigger = new THREE.Box3(\n    new THREE.Vector3(-22, 0, 0.6),\n    new THREE.Vector3(-19, 3, 3.5)\n);\n\n// -------------------------------- GUI --------------------------------\n\n// Texts for interactions\nconst doorText = document.getElementById('door-text');\nconst corpseText = document.getElementById('corpse-text');\nconst fileText = document.getElementById('file-text');\nconst reportText = document.getElementById('report-text');\nconst charlesNoteText = document.getElementById('charles-note-text');\nconst codeText = document.getElementById('code-text');\nconst exitPrompt = document.getElementById('exit-prompt');\n\n// Examines\nconst doorExam = document.getElementById('door-exam');\nconst corpseExam = document.getElementById('corpse-exam');\n\n// Images\nconst corpseTimeline = document.getElementById('corpse-timeline');\nconst report = document.getElementById('report');\nconst charlesNote = document.getElementById('charles-note');\nconst fadedScreen = document.getElementById('faded-screen');\n\n// Ensure the images are hidden by default\ncorpseTimeline.style.visibility = \"hidden\";\nreport.style.visibility = \"hidden\";\ncharlesNote.style.visibility = \"hidden\";\n\n// Function called when the player interacts with \"E\"\nfunction interact() {\n    if (playerInDoorTriggerZone) {\n        if (doorKeyFound) {\n            hideDoorText();\n            playDoorSound();\n            loadNewRoom(\"reception\");\n            playerInDoorTriggerZone = false;\n        }\n        else {\n            playLockedDoorSound();\n            showDoorExam();\n        }\n    }\n    if (playerInCorpseTriggerZone) {\n        playCorpseNoise();\n        showCorpseExam();\n    }\n    if (playerInFileTriggerZone) {\n        if (corpseTimeline.style.visibility === \"hidden\") {\n            playPaperSound();\n            showFile();\n            hideFileText();\n            showExitPrompt();\n        }\n        else {\n            hideFile();\n            showFileText();\n            hideExitPrompt();\n        }\n    }\n    if (playerInReportTriggerZone) {\n        if (report.style.visibility === \"hidden\") {\n            playPaperSound();\n            showReport();\n            hideReportText();\n            showExitPrompt();\n        }\n        else {\n            hideReport();\n            showReportText();\n            hideExitPrompt();\n        }\n    }\n    if (playerInCharlesNoteTriggerZone) {\n        if (charlesNote.style.visibility === \"hidden\") {\n            playPaperSound();\n            showCharlesNote();\n            hideCharlesNoteText();\n            showExitPrompt();\n        }\n        else {\n            hideCharlesNote();\n            showCharlesNoteText();\n            hideExitPrompt();\n        }\n    }\n}\n\n// Prompt the player to exit the game\nfunction showExitPrompt() {\n    exitPrompt.style.display = \"block\";\n}\n\nfunction hideExitPrompt() {\n    exitPrompt.style.display = \"none\";\n}\n\n// Door functions\nfunction showDoorExam() {\n    doorExam.style.visibility = \"visible\";\n}\n\nfunction hideDoorExam() {\n    doorExam.style.visibility = \"hidden\";\n}\n\nfunction showDoorText() {\n    doorText.style.visibility = \"visible\";\n}\n\nfunction hideDoorText() {\n    doorText.style.visibility = \"hidden\";\n}\n\n// Corpse functions\nfunction showCorpseExam() {\n    corpseExam.style.visibility = \"visible\";\n}\n\nfunction hideCorpseExam() {\n    corpseExam.style.visibility = \"hidden\";\n}\n\nfunction showCorpseText() {\n    corpseText.style.visibility = \"visible\";\n}\n\nfunction hideCorpseText() {\n    corpseText.style.visibility = \"hidden\";\n}\n\n// File functions\nfunction showFile() {\n    corpseTimeline.style.visibility = \"visible\";\n    fadedScreen.style.visibility = \"visible\";\n}\n\nfunction hideFile() {\n    corpseTimeline.style.visibility = \"hidden\";\n    fadedScreen.style.visibility = \"hidden\";\n}\n\nfunction showFileText() {\n    fileText.style.visibility = \"visible\";\n}\n\nfunction hideFileText() {\n    fileText.style.visibility = \"hidden\";\n}\n\n// Report functions\nfunction showReport() {\n    report.style.visibility = \"visible\";\n    fadedScreen.style.visibility = \"visible\";\n}\n\nfunction hideReport() {\n    report.style.visibility = \"hidden\";\n    fadedScreen.style.visibility = \"hidden\";\n}\n\nfunction showReportText() {\n    reportText.style.visibility = \"visible\";\n}\n\nfunction hideReportText() {\n    reportText.style.visibility = \"hidden\";\n}\n\n// Charles note functions\nfunction showCharlesNote() {\n    charlesNote.style.visibility = \"visible\";\n    fadedScreen.style.visibility = \"visible\";\n}\n\nfunction hideCharlesNote() {\n    charlesNote.style.visibility = \"hidden\";\n    fadedScreen.style.visibility = \"hidden\";\n}\n\nfunction showCharlesNoteText() {\n    charlesNoteText.style.visibility = \"visible\";\n}\n\nfunction hideCharlesNoteText() {\n    charlesNoteText.style.visibility = \"hidden\";\n}\n\n// Code functions\nfunction showCodeText() {\n    codeText.style.visibility = \"visible\";\n}\n\nfunction hideCodeText() {\n    codeText.style.visibility = \"hidden\";\n}\n\nfunction removeCodeTrigger() {\n    codeTrigger.makeEmpty();\n}\n\n// ------------------- Functions -------------------\n\n// Function called when the player finds the door key\nfunction getKey() {\n    doorKeyFound = true;\n}\n\n// Triggers function\nfunction exteriorTriggers(playerBox) {\n    // Check for door trigger collision\n    if (playerBox.intersectsBox(doorTrigger)) {\n        if (!playerInDoorTriggerZone) {\n            console.log(\"Entered the door trigger zone\");\n            showDoorText();\n            playerInDoorTriggerZone = true;\n        }\n    }\n    else {\n        if (playerInDoorTriggerZone) {\n            console.log(\"Exited the door trigger zone\");\n            hideDoorText();\n            hideDoorExam();\n            hideExitPrompt();\n            playerInDoorTriggerZone = false;\n        }\n    }\n\n    // Check for corpse trigger collision\n    if (playerBox.intersectsBox(corpseTrigger)) {\n        if (!playerInCorpseTriggerZone) {\n            console.log(\"Entered the corpse trigger zone\");\n            showCorpseText();\n            playerInCorpseTriggerZone = true;\n        }\n    }\n    else {\n        if (playerInCorpseTriggerZone) {\n            console.log(\"Exited the corpse trigger zone\");\n            hideCorpseText();\n            hideCorpseExam();\n            hideExitPrompt();\n            playerInCorpseTriggerZone = false;\n        }\n    }\n\n    // Check for code trigger collision\n    if (playerBox.intersectsBox(codeTrigger)) {\n        if (!playerInCodeTriggerZone) {\n            console.log(\"Entered the code trigger zone\");\n            showCodeText();\n            useCode();\n            playerInCodeTriggerZone = true;\n        }\n    }\n    else {\n        if (playerInCodeTriggerZone) {\n            console.log(\"Exited the code trigger zone\");\n            hideCodeText();\n            clearCode();\n            hideExitPrompt();\n            playerInCodeTriggerZone = false;\n        }\n    }\n\n    // Check for file trigger collision\n    if (playerBox.intersectsBox(fileTrigger)) {\n        if (!playerInFileTriggerZone) {\n            console.log(\"Entered the file trigger zone\");\n            showFileText();\n            playerInFileTriggerZone = true;\n        }\n    }\n    else {\n        if (playerInFileTriggerZone) {\n            console.log(\"Exited the file trigger zone\");\n            hideFileText();\n            hideFile();\n            hideExitPrompt();\n            playerInFileTriggerZone = false;\n        }\n    }\n\n    // Check for report trigger collision\n    if (playerBox.intersectsBox(reportTrigger)) {\n        if (!playerInReportTriggerZone) {\n            console.log(\"Entered the report trigger zone\");\n            showReportText();\n            playerInReportTriggerZone = true;\n        }\n    }\n    else {\n        if (playerInReportTriggerZone) {\n            console.log(\"Exited the report trigger zone\");\n            hideReportText();\n            hideReport();\n            hideExitPrompt();\n            playerInReportTriggerZone = false;\n        }\n    }\n\n    // Check for Charles note trigger collision\n    if (playerBox.intersectsBox(charlesNoteTrigger)) {\n        if (!playerInCharlesNoteTriggerZone) {\n            console.log(\"Entered the Charles note trigger zone\");\n            showCharlesNoteText();\n            playerInCharlesNoteTriggerZone = true;\n        }\n    }\n    else {\n        if (playerInCharlesNoteTriggerZone) {\n            console.log(\"Exited the Charles note trigger zone\");\n            hideCharlesNoteText();\n            hideCharlesNote();\n            hideExitPrompt();\n            playerInCharlesNoteTriggerZone = false;\n        }\n    }\n}\n\n// ------------------- Neon Light -------------------\n\nconst neonLight = new THREE.PointLight(0xffffff, 20)\nneonLight.position.set(-8, 2.4, -60)\n\nfunction loadNeonLight(scene) {\n    // Add sound effect\n    addSoundToLamp(neonLight);\n\n    scene.add(neonLight)\n}\n\nfunction getRandomInt(max) {\n    return Math.floor(Math.random() * max);\n}\n\nfunction flickerNeonLight() {\n    if (neonLight.visible) {\n        if (getRandomInt(320) == 1) {\n            neonLight.visible = false;\n        }\n    }\n\n    if (!neonLight.visible) {\n        if (getRandomInt(40) == 1) {\n            neonLight.visible = true;\n        }\n    }\n}\n\nexport { interact, exteriorTriggers, removeCodeTrigger, loadNeonLight, flickerNeonLight, getKey };","// File for the infected model\n\nimport * as THREE from 'three';\nimport { addSoundToInfected, playInfectedSound } from '../utils/sounds';\n\nlet model, mixer;\n\nlet idleAction;\n\n// Animations names:\n// static zombie: Armature|mixamo.com|Layer0\n\nfunction loadIdleInfected(infectedFile, loader, scene, position = new THREE.Vector3(0, 0, -8), rotation = new THREE.Vector3(0, 0, 0)) {\n    loader.load(infectedFile, (gltf) => {\n        model = gltf.scene;\n\n        model.scale.set(0.6, 0.6, 0.6);\n\n        // Manual positioning\n        model.position.set(position.x, position.y, position.z)\n        model.rotation.set(rotation.x, rotation.y, rotation.z)\n\n        // Sound for the infected\n        addSoundToInfected(model);\n        playInfectedSound();\n\n        scene.add(model);\n\n        model.traverse(function (object) {\n            if (object.isMesh) object.castShadow = true;\n        });\n\n        const animations = gltf.animations;\n\n        mixer = new THREE.AnimationMixer(model);\n\n        idleAction = mixer.clipAction(animations[0]);\n        idleAction.play();\n    });\n}\n\nfunction restartAnimation() {\n    idleAction.stop();\n    idleAction.play();\n}\n\nfunction idleInfectedLoop(deltaTime) {\n    if (mixer) {\n        mixer.update(deltaTime);\n    }\n}\n\nexport { loadIdleInfected, restartAnimation, idleInfectedLoop };","const blackScreenElement = document.getElementById('blackscreen');\nconst introText = document.getElementById('intro-text');\n\nfunction showIntroduction() {\n  blackScreenElement.style.visibility = \"visible\";\n  introText.style.visibility = \"visible\";\n}\n\nfunction hideIntroduction() {\n  blackScreenElement.style.visibility = \"hidden\";\n  introText.style.visibility = \"hidden\";\n}\n\nfunction waitForAnyKey(callback) {\n  function onKeyDown(event) {\n    window.removeEventListener(\"keydown\", onKeyDown);\n    if (callback) {\n      callback(event);\n    }\n  }\n  window.addEventListener(\"keydown\", onKeyDown);\n}\n\nexport { showIntroduction, hideIntroduction, waitForAnyKey };","// File for the interior scene of the game.\n\nimport * as THREE from 'three';\n\nimport { loadNewRoom } from '../main';\n\n// -------------------------------- GUI --------------------------------\n\nconst drawer1Text = document.getElementById('drawer1-text');\nconst drawer2Text = document.getElementById('drawer2-text');\n\nconst goodDrawerText = document.getElementById('gooddrawer-text');\nconst itemsContainer = document.getElementById('items-container');\nconst blurred = document.getElementById('blur');\n\n\nconst badText = document.getElementById('bad-text');\nconst goodText = document.getElementById('good-text');\nconst searchedText = document.getElementById('searched-text');\n\nconst useCardText = document.getElementById('useCard-text');\nconst noCardText = document.getElementById('noCard-text');\nconst dontOpenText = document.getElementById('dontOpen-text');\nconst openText = document.getElementById('Open-text');\n\nlet playerInDrawer1TriggerZone = false;\nlet playerInDrawer2TriggerZone = false;\nlet playerInGoodDrawerTriggerZone = false;\nlet playerInRightDoorTriggerZone = false;\nlet playerInLeftDoorTriggerZone = false;\nlet animateDrawer = false;\nlet itemsOn = false;\nlet leftDoorOpen = false;\nlet model;\n\nfunction showMessage() {\n    if (playerInDrawer1TriggerZone) {\n        hideText(drawer1Text)\n        displayText(badText);\n    }\n    if (playerInDrawer2TriggerZone) {\n        hideText(drawer2Text)\n        displayText(badText);\n    }\n    if (playerInGoodDrawerTriggerZone & !itemsOn) {\n        hideText(goodDrawerText);\n        animateDrawer = true;\n    }\n    else if (playerInGoodDrawerTriggerZone & itemsOn & goodText.style.visibility == \"hidden\") {\n        hideText(goodDrawerText);\n        displayText(searchedText);\n    }\n    else if (playerInGoodDrawerTriggerZone & itemsOn & itemsContainer.style.display == 'flex') {\n        hideText(searchedText);\n        hideMessage();\n    }\n    if (playerInRightDoorTriggerZone & itemsOn) {\n        hideText(useCardText);\n        displayText(dontOpenText);\n    }\n    if (playerInLeftDoorTriggerZone & itemsOn) {\n        hideText(useCardText);\n        leftDoorOpen = true;\n    }\n}\nfunction hideMessage() {\n    if (playerInDrawer1TriggerZone | playerInDrawer2TriggerZone) {\n        hideText(badText);\n    }\n    if (playerInGoodDrawerTriggerZone) {\n        hideText(searchedText);\n        hideText(goodText);\n        hideText(goodDrawerText);\n        itemsContainer.style.display = 'none';\n        blurred.style.display = 'none';\n\n    }\n    if (playerInRightDoorTriggerZone) {\n        hideText(dontOpenText);\n    }\n    if (playerInLeftDoorTriggerZone) {\n        hideText(openText);\n    }\n}\n\nfunction displayText(object) {\n    object.style.visibility = \"visible\";\n}\n\nfunction hideText(object) {\n    object.style.visibility = \"hidden\";\n}\n\n// ------------------- Trigger Function -------------------\n\nconst interiorDoorTrigger = new THREE.Box3(\n    new THREE.Vector3(3.3, 0, 4.),\n    new THREE.Vector3(6.1, 2.8, 4.6)\n)\n\nconst drawer1Trigger = new THREE.Box3(\n    new THREE.Vector3(1.5, 0, -2.5),\n    new THREE.Vector3(2.5, 2, -1.5)\n)\n\nconst drawer2Trigger = new THREE.Box3(\n    new THREE.Vector3(-1.7, 0, -1.75),\n    new THREE.Vector3(-0.7, 2, -0.75)\n)\n\nconst goodDrawerTrigger = new THREE.Box3(\n    new THREE.Vector3(-0.25, 0, -1.5),\n    new THREE.Vector3(0.75, 2, -0.5)\n)\n\nconst rightDoorTrigger = new THREE.Box3(\n    new THREE.Vector3(4.35, 0, -4.6),\n    new THREE.Vector3(5.85, 2, -4.2)\n)\n\nconst leftDoorTrigger = new THREE.Box3(\n    new THREE.Vector3(-5.5, 0, -4.6),\n    new THREE.Vector3(-4, 2, -4.2)\n)\n\n// const doorTriggerSize = new THREE.Vector3();\n// interiorDoorTrigger.getSize(doorTriggerSize);\n\n// const doorTriggerMesh = new THREE.Mesh(\n//     new THREE.BoxGeometry(doorTriggerSize.x, doorTriggerSize.y, doorTriggerSize.z), // Size of the box\n//     new THREE.MeshBasicMaterial({ color: 0xff0000, wireframe: true }) // Red wireframe material for visualization\n// );\n\n//doorTriggerMesh.position.copy(interiorDoorTrigger.getCenter(new THREE.Vector3()));\n\nfunction intersectobject(playerBox, Trigger, inTrigger, text) {\n    if (playerBox.intersectsBox(Trigger)) {\n        if (!inTrigger) {\n            console.log(\"Entered the trigger zone\");\n            displayText(text);\n            return true;\n        }\n    }\n    else {\n        if (inTrigger) {\n            console.log(\"Exited the trigger zone\");\n            hideText(text);\n            hideMessage();\n            if (playerInGoodDrawerTriggerZone & itemsOn & itemsContainer.style.display == 'flex') {\n                return true;\n            }\n            return false;\n        }\n    }\n    return inTrigger\n}\n\nfunction loadDrawer(drawer, loader, scene) {\n    loader.load(drawer, (gltf) => {\n        model = gltf.scene;\n\n        model.scale.set(2.3, 1.778, 1);\n        model.position.set(0.2, 0.739, -0.571);\n        model.rotation.y += Math.PI;\n\n        scene.add(model);\n    });\n}\n\nfunction receptionTriggers(playerBox) {\n    // Check for door trigger collision\n    if (playerBox.intersectsBox(interiorDoorTrigger)) {\n        loadNewRoom(\"exterior\");\n    }\n    if (playerBox.intersectsBox(leftDoorTrigger) & leftDoorOpen == true) {\n        leftDoorOpen = false;\n        loadNewRoom(\"corridor\");\n    }\n    playerInDrawer1TriggerZone = intersectobject(playerBox, drawer1Trigger, playerInDrawer1TriggerZone, drawer1Text)\n    playerInDrawer2TriggerZone = intersectobject(playerBox, drawer2Trigger, playerInDrawer2TriggerZone, drawer2Text)\n    playerInGoodDrawerTriggerZone = intersectobject(playerBox, goodDrawerTrigger, playerInGoodDrawerTriggerZone, goodDrawerText)\n    if (itemsOn) {\n        playerInRightDoorTriggerZone = intersectobject(playerBox, rightDoorTrigger, playerInRightDoorTriggerZone, useCardText)\n        playerInLeftDoorTriggerZone = intersectobject(playerBox, leftDoorTrigger, playerInLeftDoorTriggerZone, useCardText)\n    }\n    else {\n        playerInRightDoorTriggerZone = intersectobject(playerBox, rightDoorTrigger, playerInRightDoorTriggerZone, noCardText)\n        playerInLeftDoorTriggerZone = intersectobject(playerBox, leftDoorTrigger, playerInLeftDoorTriggerZone, noCardText)\n    }\n\n    if (animateDrawer) {\n        if (model.position.z > -0.9) {\n            model.position.z -= 0.01;\n        }\n        else {\n            displayText(goodText)\n            itemsContainer.style.display = 'flex';\n            blurred.style.display = 'block';\n            itemsOn = true;\n            animateDrawer = false\n        }\n    }\n\n}\n\nexport { loadDrawer, receptionTriggers, showMessage };","// File for the interior scene of the game.\n\nimport * as THREE from 'three';\n\nimport { loadNewRoom } from '../main';\n\n// -------------------------------- GUI --------------------------------\nconst openDoor = document.getElementById('openDoor-text');\nconst closedDoor = document.getElementById('closedDoor-text');\nconst zombieDoor = document.getElementById('zombieDoor-text');\n\nlet playerInBadDoorTriggerZone = false;\nlet playerInZombieDoorTriggerZone = false;\nlet playerInGoodDoorTriggerZone = false;\n\nfunction showCorridorMessage() {\n    if (playerInBadDoorTriggerZone) {\n        hideText(openDoor)\n        displayText(closedDoor);\n    }\n    if (playerInGoodDoorTriggerZone) {\n        hideText(openDoor);\n        loadNewRoom('room');\n    }\n    if (playerInZombieDoorTriggerZone) {\n        hideText(openDoor);\n        displayText(zombieDoor);\n    }\n}\n\nfunction hideMessage() {\n    hideText(openDoor);\n    hideText(closedDoor);\n    hideText(zombieDoor);\n}\n\nfunction displayText(object) {\n    object.style.visibility = \"visible\";\n}\n\nfunction hideText(object) {\n    object.style.visibility = \"hidden\";\n}\n\n// ------------------- Trigger Function -------------------\n\nconst Door1Trigger = new THREE.Box3(\n    new THREE.Vector3(1.25, -0.05, -14.65),\n    new THREE.Vector3(1.75, 2.05, -13.85)\n)\nconst Door2Trigger = new THREE.Box3(\n    new THREE.Vector3(3.35, -0.05, -14),\n    new THREE.Vector3(3.85, 2.05, -13.2)\n)\nconst Door3Trigger = new THREE.Box3(\n    new THREE.Vector3(3.35, -0.05, -9.8),\n    new THREE.Vector3(3.85, 2.05, -9.0)\n)\nconst Door4Trigger = new THREE.Box3(\n    new THREE.Vector3(1.25, -0.05, -8.7),\n    new THREE.Vector3(1.75, 2.05, -7.9)\n)\nconst Door5Trigger = new THREE.Box3(\n    new THREE.Vector3(3.35, -0.05, -5.1),\n    new THREE.Vector3(3.85, 2.05, -4.3)\n)\nconst Door6Trigger = new THREE.Box3(\n    new THREE.Vector3(3.35, -0.05, 1.094),\n    new THREE.Vector3(3.85, 2.05, 1.894)\n)\nconst Door7Trigger = new THREE.Box3(\n    new THREE.Vector3(3.35, -0.05, 7.5),\n    new THREE.Vector3(3.85, 2.05, 8.3)\n)\nconst Door8Trigger = new THREE.Box3(\n    new THREE.Vector3(1.25, -0.05, 2.6),\n    new THREE.Vector3(1.75, 2.05, 3.4)\n)\nconst goodDoorTrigger = new THREE.Box3(\n    new THREE.Vector3(1.25, -0.05, 7.5),\n    new THREE.Vector3(1.75, 2.05, 8.3)\n)\nconst receptionDoorTrigger = new THREE.Box3(\n    new THREE.Vector3(1.8, 0, -16.5),\n    new THREE.Vector3(3.3, 2.2, -16.1)\n)\n\nconst doorArray = [Door1Trigger, Door2Trigger, Door3Trigger, Door4Trigger, Door5Trigger, Door6Trigger, Door7Trigger]\n\nfunction intersectobject(playerBox, Trigger, inTrigger, text) {\n    if (playerBox.intersectsBox(Trigger)) {\n        if (!inTrigger) {\n            console.log(\"Entered the trigger zone\");\n            displayText(text);\n            return true;\n        }\n    }\n    else {\n        if (inTrigger) {\n            console.log(\"Exited the trigger zone\");\n            hideText(text);\n            hideMessage(text);\n            return false;\n        }\n    }\n    return inTrigger;\n}\n\nfunction intersectMultipleObject(playerBox, Triggers, inTrigger, text) {\n    let intersect = false;\n    for (const Trigger of Triggers) {\n        if (playerBox.intersectsBox(Trigger)) {\n            if (!inTrigger) {\n                console.log(\"Entered the trigger zone\");\n                displayText(text);\n            }\n            return true;\n        }\n    }\n    if (inTrigger & !intersect) {\n        console.log(\"Exited the trigger zone\");\n        hideText(text);\n        hideMessage(text);\n    }\n    return false;\n}\n\nfunction corridorTriggers(playerBox) {\n    // Check for door trigger collision\n    if (playerBox.intersectsBox(receptionDoorTrigger)) {\n        loadNewRoom(\"reception\");\n    }\n    playerInBadDoorTriggerZone = intersectMultipleObject(playerBox, doorArray, playerInBadDoorTriggerZone, openDoor)\n    playerInZombieDoorTriggerZone = intersectobject(playerBox, Door8Trigger, playerInZombieDoorTriggerZone, openDoor)\n    playerInGoodDoorTriggerZone = intersectobject(playerBox, goodDoorTrigger, playerInGoodDoorTriggerZone, openDoor)\n\n}\n\n\nexport { corridorTriggers, showCorridorMessage };","// File for the interior scene of the game.\n\nimport * as THREE from 'three';\n\nimport { loadNewRoom } from '../main';\n\n// -------------------------------- GUI --------------------------------\nconst launchDialogue = document.getElementById('launchDialogue-text');\nconst dialogueContainer = document.getElementById('dialogue-container');\nconst dialogueText = document.getElementById('dialogue-text');\nconst dialogueSpeaker = document.getElementById('dialogue-speaker');\nconst blurred = document.getElementById('blur');\nconst exitPrompt = document.getElementById('exit-prompt');\nconst pauseOverlay = document.getElementById('pause-overlay');\nconst pauseText = document.getElementById('pause-text');\n\nlet playerInBrotherTriggerZone = false;\nlet startDialogue = false;\nlet currentDialogueIndex = 0;\n\nconst dialogues = [\n    { speaker: \"Brother\", text: \"You came all the way here for me? Are you ok?\" },\n    { speaker: \"You\", text: \"Of course I did. I just feel a little tired, some creature bit me. But it's ok.\" },\n    { speaker: \"Brother\", text: \"Bit you...?\" },\n    { speaker: \"You\", text: \"Yeah but that's nothing to care about.\" },\n    { speaker: \"Brother\", text: \"Of course it's something to care about! Let me see your eyes.\" },\n    { speaker: \"Brother\", text: \"That's what I thought. Your eyes are so red... You're infected.\" },\n    { speaker: \"You\", text: \"Infected? You mean I'll become one of them?\" },\n    { speaker: \"Brother\", text: \"One of us...\" },\n    { speaker: \"You\", text: \"You're infected too...?!\" },\n    { speaker: \"Brother\", text: \"Yeah, we were only two survivors, my doctor and I. We barricaded ourselves in this corridor.\" },\n    { speaker: \"You\", text: \"Now that I think about it I saw an infected in the room next door...\" },\n    { speaker: \"Brother\", text: \"We tried to leave the hospital but we were attacked, we got infected.\" },\n    { speaker: \"Brother\", text: \"I don't know why, but my symptoms took a lot longer than his to develop.\" },\n    { speaker: \"Brother\", text: \"While searching why I resisted to the infection, my doctor found an antidote.\" },\n    { speaker: \"You\", text: \"Amazing! Where is it??\" },\n    { speaker: \"Brother\", text: \"That's the problem... Frederic didn't finish the antidote. He needed a last ingredient.\" },\n    { speaker: \"You\", text: \"Wait, Frederic? Is that the name of your doctor?\" },\n    { speaker: \"Brother\", text: \"Yes, why?\" },\n    { speaker: \"You\", text: \"I found a paper from a certain Dr. Frederic Bloupin. There was a bottle with it.\" },\n    { speaker: \"Brother\", text: \"Are you kiding me? So you have the final piece! We can escape from here safely!\" },\n    { speaker: \"You\", text: \"Finally some good news...\" },\n\n    { speaker: \"Pause\", text: \"A few moments later...\" },\n\n    { speaker: \"You\", text: \"It's done but...\" },\n    { speaker: \"Brother\", text: \"We only have one dose of remedy.\" },\n    { speaker: \"You\", text: \"...\" },\n    { speaker: \"Brother\", text: \"...\" },\n    { speaker: \"You\", text: \"You should take it.\" },\n    { speaker: \"Brother\", text: \"No, you should! You have better chances of survival.\" },\n    { speaker: \"You\", text: \"But you were here for so long waiting to escape...\" },\n    { speaker: \"Brother\", text: \"Take it.\" },\n    { speaker: \"Pause\", text: \"Make a choice\\nPress Y to save your Brother. Press N to save yourselve.\" }\n];\n\nconst selfish = [\n    { speaker: \"Brother\", text: \"Go and live a long life. I'll miss you.\" },\n    { speaker: \"Pause\", text: \"You took the remedy and left the hospital. An infected attacked you and wounded you to death. You died alone in the parking lot of the hospital, while your brother fell asleep for an endless night.\\nBad ending...\" }\n];\n\nconst victory = [\n    { speaker: \"Brother\", text: \"I can't take it, you came all the way here for me...\" },\n    { speaker: \"You\", text: \"You are my little brother. It's my duty to protect you.\" },\n    { speaker: \"Pause\", text: \"Your brother took the remedy. While you helped him escape the hospital, he saw a locker looking quite familiar to him. It was Frederic's locker! You found an other dose of the remedy and escaped together safely.\\nCongratulations!\" }\n];\n\nlet currentDialogue = dialogues;\n\n// ------------------- Trigger Function -------------------\n\nconst corridorDoorTrigger = new THREE.Box3(\n    new THREE.Vector3(-2.9, 0, -4.3),\n    new THREE.Vector3(-0.5, 3.5, -3.7)\n)\n\nconst brotherTrigger = new THREE.Box3(\n    new THREE.Vector3(-3, 0, -2.5),\n    new THREE.Vector3(-1, 4, 1.5)\n)\n\nfunction updateDialogue(currentDialogue) {\n    if (currentDialogue.speaker === \"Pause\") {\n        dialogueContainer.style.display = 'none'; // Cache la boîte de dialogue normale\n        pauseOverlay.style.display = 'flex';      // Affiche l'écran noir de pause\n        pauseText.innerText = currentDialogue.text; // Affiche le texte en grand sur l'écran noir\n    }\n    else {\n        dialogueSpeaker.innerText = currentDialogue.speaker\n        dialogueSpeaker.style.color = currentDialogue.speaker === \"You\" ? \"green\" : \"#ffcc00\"; // Vert si le joueur parle, jaune sinon\n        dialogueText.innerText = currentDialogue.text;\n    }\n}\n\nfunction showDialogue() {\n    launchDialogue.style.visibility = 'hidden'\n    startDialogue = true;\n    dialogueContainer.style.display = 'block';\n    blurred.style.display = 'block';\n    exitPrompt.style.display = 'block';\n    pauseOverlay.style.display = 'none';\n}\n\nfunction hideDialogue() {\n    launchDialogue.style.visibility = 'visible'\n    startDialogue = false;\n    dialogueContainer.style.display = 'none';\n    blurred.style.display = 'none';\n    exitPrompt.style.display = 'none';\n    pauseOverlay.style.display = 'none';\n}\n\nfunction brotherDialogue() {\n    if (playerInBrotherTriggerZone & currentDialogueIndex < currentDialogue.length) {\n        showDialogue();\n        updateDialogue(currentDialogue[currentDialogueIndex]);\n        currentDialogueIndex++;\n    }\n    else if (playerInBrotherTriggerZone & currentDialogueIndex >= currentDialogue.length) {\n    }\n}\n\nfunction exitDialogue() {\n    if (startDialogue) {\n        hideDialogue();\n    }\n}\n\nfunction finalDialogue(response) {\n    currentDialogueIndex = 0;\n    if (response) {\n        currentDialogue = victory;\n        brotherDialogue()\n    }\n    else {\n        currentDialogue = selfish;\n        brotherDialogue()\n    }\n}\n\nfunction intersectobject(playerBox, Trigger, inTrigger, text) {\n    if (playerBox.intersectsBox(Trigger)) {\n        if (!inTrigger) {\n            console.log(\"Entered the trigger zone\");\n            text.style.visibility = \"visible\";\n            return true;\n        }\n    }\n    else {\n        if (inTrigger) {\n            console.log(\"Exited the trigger zone\");\n            text.style.visibility = \"hidden\";\n            return false;\n        }\n    }\n    return inTrigger;\n}\n\nfunction roomTriggers(playerBox) {\n    if (!startDialogue) {\n        // Check for door trigger collision\n        if (playerBox.intersectsBox(corridorDoorTrigger)) {\n            loadNewRoom(\"corridor\");\n        }\n        playerInBrotherTriggerZone = intersectobject(playerBox, brotherTrigger, playerInBrotherTriggerZone, launchDialogue)\n    }\n}\n\n\nexport { roomTriggers, brotherDialogue, exitDialogue, finalDialogue };","import * as THREE from 'three';\n\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { Octree } from 'three/addons/math/Octree.js';\nimport { Capsule } from 'three/addons/math/Capsule.js';\n\n// Local imports\nimport { loadInfected, infectedLoop, removeInfected } from './entities/moving-infected.js';\nimport { flickerNeonLight, loadNeonLight, exteriorTriggers, interact } from './scenes/exterior.js';\nimport { idleInfectedLoop, loadIdleInfected } from './entities/idle-infected.js';\nimport { hideIntroduction, showIntroduction, waitForAnyKey } from './scenes/intro.js';\nimport { loadDrawer, receptionTriggers, showMessage } from './scenes/reception.js';\nimport { corridorTriggers, showCorridorMessage } from './scenes/corridor.js';\nimport { addListenerToCamera, pauseFootsteps, playExteriorBackgroundMusic, playFootsteps, playMeetingBrotherMusic, stopBackgroundMusic } from './utils/sounds.js';\nimport { roomTriggers, brotherDialogue, exitDialogue, finalDialogue } from './scenes/room.js';\n\n// -------------------------------- Base setup --------------------------------\n\nconst clock = new THREE.Clock();\n\nconst scene = new THREE.Scene();\n\nconst camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);\ncamera.rotation.order = 'YXZ';\n\nconst container = document.getElementById('container');\n\nconst renderer = new THREE.WebGLRenderer({ antialias: true });\nrenderer.setPixelRatio(window.devicePixelRatio);\nrenderer.setSize(window.innerWidth, window.innerHeight);\nrenderer.setAnimationLoop(animate);\nrenderer.shadowMap.enabled = true;\nrenderer.shadowMap.type = THREE.VSMShadowMap;\nrenderer.toneMapping = THREE.ACESFilmicToneMapping;\ncontainer.appendChild(renderer.domElement);\n\nconst GRAVITY = 80; // default: 30\n\nconst STEPS_PER_FRAME = 1;\n\nconst worldOctree = new Octree();\n\nconst playerCollider = new Capsule(new THREE.Vector3(0, 0.35, 0), new THREE.Vector3(0, 1, 0), 0.35);\nconst playerLight = new THREE.PointLight(0xffffff, 0.5);\nconst playerVelocity = new THREE.Vector3();\nconst playerDirection = new THREE.Vector3();\n\nlet playerOnFloor = false;\n\nconst keyStates = {};\n\nconst loader = new GLTFLoader().setPath('/RAUG-Cahet-Codron/assets/models/');\n\n// Loading state\nlet isLoading = false;\n\n// Current room state\nlet currentRoom = 'exterior';\nlet precedentRoom = 'exterior';\n\n// Cuurent game state\nlet gameStarted = false;\nconst keyPressed = {};\n\n// ------------------------------------ GUI ------------------------------------\n\nconst loaderElement = document.getElementById('loader');\nconst blackScreenElement = document.getElementById('blackscreen');\nconst loadingBar = document.querySelector('.loading-bar');\n\n// -------------------------------- Event listeners --------------------------------\n\ndocument.addEventListener('keydown', (event) => {\n  if (!keyPressed[event.code]) {\n    keyStates[event.code] = true;\n    keyPressed[event.code] = true;\n  }\n});\n\ndocument.addEventListener('keyup', (event) => {\n  keyStates[event.code] = false;\n  keyPressed[event.code] = false;\n});\n\ncontainer.addEventListener('mousedown', () => {\n  document.body.requestPointerLock();\n});\n\ndocument.body.addEventListener('mousemove', (event) => {\n  if (document.pointerLockElement === document.body) {\n    camera.rotation.y -= event.movementX / 500;\n    camera.rotation.x -= event.movementY / 500;\n  }\n});\n\n// Handle single clicks for interactions specifically\ndocument.addEventListener('keyup', (event) => {\n  if (event.code === 'KeyE') {\n    interact();\n    if (currentRoom === 'reception') {\n      showMessage();\n    }\n    if (currentRoom === 'corridor') {\n      showCorridorMessage();\n    }\n    if (currentRoom === 'room') {\n      exitDialogue();\n    }\n  }\n});\n\ndocument.addEventListener('keyup', (event) => {\n  if (event.code === 'KeyY') {\n    if (currentRoom === 'room') {\n      finalDialogue(true);\n    }\n  }\n});\n\ndocument.addEventListener('keyup', (event) => {\n  if (event.code === 'KeyN') {\n    if (currentRoom === 'room') {\n      finalDialogue(false);\n    }\n  }\n});\n\ndocument.addEventListener('keyup', (event) => {\n  if (event.code === 'Space') {\n    if (currentRoom === 'room') {\n      brotherDialogue();\n    }\n  }\n});\n\nwindow.addEventListener('resize', onWindowResize);\n\n// -------------------------------- Functions --------------------------------\n\nfunction onWindowResize() {\n  camera.aspect = window.innerWidth / window.innerHeight;\n  camera.updateProjectionMatrix();\n  renderer.setSize(window.innerWidth, window.innerHeight);\n}\n\nfunction playerCollisions() {\n  const result = worldOctree.capsuleIntersect(playerCollider);\n\n  playerOnFloor = false;\n\n  if (result) {\n    playerOnFloor = result.normal.y > 0;\n\n    if (!playerOnFloor) {\n      playerVelocity.addScaledVector(result.normal, - result.normal.dot(playerVelocity));\n    }\n\n    if (result.depth >= 1e-10) {\n      playerCollider.translate(result.normal.multiplyScalar(result.depth));\n    }\n  }\n}\n\nfunction updatePlayer(deltaTime) {\n  let damping = Math.exp(- 4 * deltaTime) - 1;\n\n  if (!playerOnFloor) {\n    playerVelocity.y -= GRAVITY * deltaTime;\n    // small air resistance\n    damping *= 0.1;\n  }\n\n  playerVelocity.addScaledVector(playerVelocity, damping);\n\n  const deltaPosition = playerVelocity.clone().multiplyScalar(deltaTime);\n  playerCollider.translate(deltaPosition);\n\n  playerCollisions();\n\n  let playerPositions = playerCollider.end.clone();\n  playerPositions.y += 0.8;\n\n  camera.position.copy(playerPositions);\n  playerLight.position.copy(playerCollider.end);\n}\n\nfunction getForwardVector() {\n  camera.getWorldDirection(playerDirection);\n  playerDirection.y = 0;\n  playerDirection.normalize();\n  return playerDirection;\n}\n\nfunction getSideVector() {\n  camera.getWorldDirection(playerDirection);\n  playerDirection.y = 0;\n  playerDirection.normalize();\n  playerDirection.cross(camera.up);\n  return playerDirection;\n}\n\nfunction controls(deltaTime) {\n  // gives a bit of air control\n  const speedDelta = deltaTime * (playerOnFloor ? 25 : 8);\n\n  if ((keyStates['KeyW'] || keyStates['KeyS'] || keyStates['KeyA'] || keyStates['KeyD']) && !isLoading) {\n    playFootsteps();\n  }\n  else {\n    pauseFootsteps();\n  }\n\n  if (keyStates['KeyW'] && !isLoading) {\n    playerVelocity.add(getForwardVector().multiplyScalar(speedDelta));\n  }\n\n  if (keyStates['KeyS'] && !isLoading) {\n    playerVelocity.add(getForwardVector().multiplyScalar(- speedDelta));\n  }\n\n  if (keyStates['KeyA'] && !isLoading) {\n    playerVelocity.add(getSideVector().multiplyScalar(- speedDelta));\n  }\n\n  if (keyStates['KeyD'] && !isLoading) {\n    playerVelocity.add(getSideVector().multiplyScalar(speedDelta));\n  }\n}\n\nfunction checkTriggers() {\n  const playerBox = new THREE.Box3().setFromPoints([\n    playerCollider.start,\n    playerCollider.end\n  ]);\n\n  if (currentRoom === 'exterior') {\n    exteriorTriggers(playerBox);\n  }\n  if (currentRoom === 'reception') {\n    receptionTriggers(playerBox);\n  }\n  if (currentRoom === 'corridor') {\n    corridorTriggers(playerBox);\n  }\n  if (currentRoom === 'room') {\n    roomTriggers(playerBox);\n  }\n}\n\nfunction loadRoom(roomFile) {\n  return new Promise((resolve, reject) => {\n    console.log('Loading room:', roomFile);\n    blackScreenElement.style.visibility = 'visible';\n    loaderElement.style.visibility = 'visible';\n    isLoading = true;\n\n    // Disable player physics/controls while loading\n    playerOnFloor = true;  // Prevent initial falling\n    playerVelocity.y = 0;  // Reset vertical velocity\n\n    loader.load(\n      roomFile,\n      (gltf) => {\n        try {\n          // Clear the current scene\n          removeInfected();\n          scene.clear();\n          worldOctree.clear();\n\n          // Add scene elements\n          scene.add(gltf.scene);\n          scene.add(playerLight);\n\n          // Process meshes first\n          gltf.scene.traverse(child => {\n            if (child.isMesh) {\n              child.castShadow = true;\n              child.receiveShadow = true;\n              if (child.material.map) {\n                child.material.map.anisotropy = 4;\n              }\n            }\n          });\n\n          // Process octree with a small delay to ensure scene is ready\n          setTimeout(() => {\n            console.log('Computing octree...');\n            worldOctree.fromGraphNode(gltf.scene);\n\n            // Setup room-specific elements after octree is ready\n            setupRoomSpecifics(roomFile);\n\n            // Give a small additional delay for the octree to finish internal computations\n            setTimeout(() => {\n              console.log('Room fully loaded and collision ready');\n              loaderElement.style.visibility = 'hidden';\n              blackScreenElement.style.visibility = 'hidden';\n              isLoading = false;\n              loadingBar.style.width = '0%';\n\n              // Ensure player is properly positioned before enabling physics\n              playerCollider.start.copy(camera.position).y -= 0.35;\n              playerCollider.end.copy(camera.position).y += 0.35;\n              playerOnFloor = false;  // Reset this to allow proper physics\n\n              resolve();\n            }, 100);  // Small delay for octree completion\n          }, 50);  // Small delay before starting octree computation\n\n        } catch (error) {\n          console.error('Error processing room:', error);\n          reject(error);\n        }\n      },\n      (progress) => {\n        const percentComplete = Math.round((progress.loaded / progress.total) * 100);\n        loadingBar.style.width = percentComplete + '%';\n        console.log(percentComplete + '%');\n      },\n      (error) => {\n        console.error('An error occurred while loading the model:', error);\n        loaderElement.style.visibility = 'hidden';\n        blackScreenElement.style.visibility = 'hidden';\n        reject(error);\n      }\n    );\n  });\n}\n\n// Helper function to handle room-specific setup (unchanged)\nfunction setupRoomSpecifics(roomFile) {\n  stopBackgroundMusic();\n\n  switch (roomFile) {\n    case 'exterior.glb':\n      playerCollider.start.set(0, 0.35, 0);\n      playerCollider.end.set(0, 1, 0);\n      camera.position.copy(playerCollider.end);\n      camera.rotation.set(0, 0, 0);\n      playExteriorBackgroundMusic();\n      loadNeonLight(scene);\n      break;\n\n    case 'reception.glb':\n      if (precedentRoom === 'exterior') {\n        playerCollider.start.set(5, 0.675, 3);\n        playerCollider.end.set(5, 1.325, 3);\n        camera.rotation.set(0, 0, 0);\n      } else {\n        playerCollider.start.set(-4.7, 0.675, -3.5);\n        playerCollider.end.set(-4.7, 1.325, -3.5);\n        camera.rotation.set(0, Math.PI, 0);\n      }\n      camera.position.copy(playerCollider.end);\n      playerLight.position.copy(playerCollider.end);\n      loadDrawer('drawer.glb', loader, scene);\n      break;\n\n    case 'corridor.glb':\n      if (precedentRoom === 'reception') {\n        playerCollider.start.set(2.2, 0.675, -15);\n        playerCollider.end.set(2.2, 1.325, -15);\n        camera.rotation.set(0, Math.PI, 0);\n      } else {\n        playerCollider.start.set(2, 0.675, 8);\n        playerCollider.end.set(2, 1.325, 8);\n        camera.rotation.set(0, 0, 0);\n      }\n      camera.position.copy(playerCollider.end);\n      playerLight.position.copy(playerCollider.end);\n      loadIdleInfected('idle-infected.glb', loader, scene, new THREE.Vector3(-2, 0, 3.5), new THREE.Vector3(0, 180, 0));\n      break;\n\n    case 'room.glb':\n      playerCollider.start.set(0, 1.5, -2.6);\n      playerCollider.end.set(0, 2.15, -2.6);\n      camera.rotation.set(0, Math.PI, 0);\n      camera.position.copy(playerCollider.end);\n      playerLight.position.copy(playerCollider.end);\n      playMeetingBrotherMusic();\n      break;\n  }\n}\n\nfunction loadNewRoom(roomName) {\n  precedentRoom = currentRoom;\n  currentRoom = roomName;\n  loadRoom(roomName + '.glb');\n}\n\nfunction teleportPlayerIfOob() {\n  if (camera.position.y <= - 25) {\n    playerCollider.start.set(0, 0.35, 0);\n    playerCollider.end.set(0, 1, 0);\n    playerCollider.radius = 0.35;\n    camera.position.copy(playerCollider.end);\n    camera.rotation.set(0, 0, 0);\n    playerLight.position.copy(playerCollider.end);\n  }\n}\n\nfunction spawnInfected() {\n  loadInfected('moving-infected.glb', loader, scene);\n}\n\n// -------------------------------- Load the initial room --------------------------------\n\naddListenerToCamera(camera);\n\nshowIntroduction();\n\nif (!gameStarted) {\n  waitForAnyKey(() => {\n    gameStarted = true;\n    hideIntroduction();\n\n    // Initial room load\n    loadRoom(currentRoom + '.glb');\n  });\n}\n\n// -------------------------------- Main loop --------------------------------\n\nfunction animate() {\n  const deltaTime = Math.min(0.05, clock.getDelta()) / STEPS_PER_FRAME;\n\n  // we look for collisions in substeps to mitigate the risk of\n  // an object traversing another too quickly for detection.\n\n  for (let i = 0; i < STEPS_PER_FRAME; i++) {\n    infectedLoop(deltaTime, playerCollider);\n    idleInfectedLoop(deltaTime);\n    controls(deltaTime);\n    updatePlayer(deltaTime);\n    teleportPlayerIfOob();\n    flickerNeonLight();\n    checkTriggers();\n  }\n  renderer.render(scene, camera);\n}\n\n// exports\nexport { loadNewRoom, spawnInfected }"],"names":["overlay","flashRed","listener","THREE.AudioListener","audioLoader","THREE.AudioLoader","exteriorBackgroundMusic","THREE.Audio","buffer","meetingBrotherMusic","scaryViolins","shepardTone","biteScarySound","biteSound","paperSound","doorSound","lockedDoorSound","corpseNoise","footsteps","infectedSound","THREE.PositionalAudio","lampSound","addListenerToCamera","camera","addSoundToInfected","infected","addSoundToLamp","lamp","playExteriorBackgroundMusic","playMeetingBrotherMusic","playInfectedSound","stopBackgroundMusic","playBiteSound","playInfectedChase","stopInfectedChase","playPaperSound","playDoorSound","playLockedDoorSound","playCorpseNoise","playFootsteps","pauseFootsteps","model","mixer","idleAction","walkAction","walkWithArmsAction","runAction","attackAction","fallBackwardAction","isFallingBack","isDead","infectedSpeed","infectedBite","loadInfected","infectedFile","loader","scene","state","gltf","object","animations","THREE.AnimationMixer","fromRunTofallBack","THREE.LoopOnce","infectedLoop","deltaTime","playerCollider","playerPosition","direction","THREE.Vector3","lookAt","removeInfected","material","validCode","codeInput","solvedCodeText","clearCode","removeCodeListener","checkCode","addDigit","digit","keyHandler","event","getKey","spawnInfected","removeCodeTrigger","useCode","doorKeyFound","playerInDoorTriggerZone","playerInCorpseTriggerZone","playerInCodeTriggerZone","playerInFileTriggerZone","playerInReportTriggerZone","playerInCharlesNoteTriggerZone","doorTrigger","THREE.Box3","corpseTrigger","codeTrigger","fileTrigger","reportTrigger","charlesNoteTrigger","doorText","corpseText","fileText","reportText","charlesNoteText","codeText","exitPrompt","doorExam","corpseExam","corpseTimeline","report","charlesNote","fadedScreen","interact","hideDoorText","loadNewRoom","showDoorExam","showCorpseExam","showFile","hideFileText","showExitPrompt","hideFile","showFileText","hideExitPrompt","showReport","hideReportText","hideReport","showReportText","showCharlesNote","hideCharlesNoteText","hideCharlesNote","showCharlesNoteText","hideDoorExam","showDoorText","hideCorpseExam","showCorpseText","hideCorpseText","showCodeText","hideCodeText","exteriorTriggers","playerBox","neonLight","THREE.PointLight","loadNeonLight","getRandomInt","max","flickerNeonLight","loadIdleInfected","position","rotation","idleInfectedLoop","blackScreenElement","introText","showIntroduction","hideIntroduction","waitForAnyKey","callback","onKeyDown","drawer1Text","drawer2Text","goodDrawerText","itemsContainer","blurred","badText","goodText","searchedText","useCardText","noCardText","dontOpenText","openText","playerInDrawer1TriggerZone","playerInDrawer2TriggerZone","playerInGoodDrawerTriggerZone","playerInRightDoorTriggerZone","playerInLeftDoorTriggerZone","animateDrawer","itemsOn","leftDoorOpen","showMessage","hideText","displayText","hideMessage","interiorDoorTrigger","drawer1Trigger","drawer2Trigger","goodDrawerTrigger","rightDoorTrigger","leftDoorTrigger","intersectobject","Trigger","inTrigger","text","loadDrawer","drawer","receptionTriggers","openDoor","closedDoor","zombieDoor","playerInBadDoorTriggerZone","playerInZombieDoorTriggerZone","playerInGoodDoorTriggerZone","showCorridorMessage","Door1Trigger","Door2Trigger","Door3Trigger","Door4Trigger","Door5Trigger","Door6Trigger","Door7Trigger","Door8Trigger","goodDoorTrigger","receptionDoorTrigger","doorArray","intersectMultipleObject","Triggers","intersect","corridorTriggers","launchDialogue","dialogueContainer","dialogueText","dialogueSpeaker","pauseOverlay","pauseText","playerInBrotherTriggerZone","startDialogue","currentDialogueIndex","dialogues","selfish","victory","currentDialogue","corridorDoorTrigger","brotherTrigger","updateDialogue","showDialogue","hideDialogue","brotherDialogue","exitDialogue","finalDialogue","response","roomTriggers","clock","THREE.Clock","THREE.Scene","THREE.PerspectiveCamera","container","renderer","THREE.WebGLRenderer","animate","THREE.VSMShadowMap","THREE.ACESFilmicToneMapping","GRAVITY","STEPS_PER_FRAME","worldOctree","Octree","Capsule","playerLight","playerVelocity","playerDirection","playerOnFloor","keyStates","GLTFLoader","isLoading","currentRoom","precedentRoom","gameStarted","keyPressed","loaderElement","loadingBar","onWindowResize","playerCollisions","result","updatePlayer","damping","deltaPosition","playerPositions","getForwardVector","getSideVector","controls","speedDelta","checkTriggers","loadRoom","roomFile","resolve","reject","child","setupRoomSpecifics","error","progress","percentComplete","roomName","teleportPlayerIfOob","i"],"mappings":"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"}
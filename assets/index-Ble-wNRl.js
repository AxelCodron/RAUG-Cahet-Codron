import{ag as Jt,ah as Qt,ai as w,aj as dt,ak as ct,W as t,al as eo,P as ut,a9 as l,am as to,z as oo,an as no,ao as io,ap as so,aq as ro}from"./three.core-DF9gDMDL.js";import{G as lo,O as ao,C as co}from"./three.examples-B3IXmiTy.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const k of a.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&i(k)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const ne=document.getElementById("damage-overlay");function uo(){ne.style.opacity="0.8",setTimeout(()=>{ne.style.opacity="0",ne.classList.add("fade-out"),setTimeout(()=>{ne.classList.remove("fade-out")},1e3)},200)}const y=new Jt,m=new Qt,U=new w(y);m.load("assets/sounds/abadoned-pyramid-atmo-orchestral-and-drone-sad-mood-9237.mp3",e=>{U.setBuffer(e),U.setLoop(!0),U.setVolume(.1)});const J=new w(y);m.load("assets/sounds/a-rainy-day-248712.mp3",e=>{J.setBuffer(e),J.setLoop(!0),J.setVolume(.2)});const Q=new w(y);m.load("assets/sounds/scaryviolins-6829.mp3",e=>{Q.setBuffer(e),Q.setLoop(!0),Q.setVolume(.8)});const ee=new w(y);m.load("assets/sounds/shepard-effect-edit.mp3",e=>{ee.setBuffer(e),ee.setLoop(!0),ee.setVolume(.6)});const Te=new w(y);m.load("assets/sounds/cringe-scare-47561.mp3",e=>{Te.setBuffer(e),Te.setVolume(.2)});const ke=new w(y);m.load("assets/sounds/zombie-bite-96528.mp3",e=>{ke.setBuffer(e),ke.setVolume(.5)});const Ee=new w(y);m.load("assets/sounds/paper-245786.mp3",e=>{Ee.setBuffer(e),Ee.setVolume(.5)});const Be=new w(y);m.load("assets/sounds/closing-metal-door-44280.mp3",e=>{Be.setBuffer(e),Be.setVolume(.5)});const De=new w(y);m.load("assets/sounds/door-close-79921.mp3",e=>{De.setBuffer(e),De.setVolume(.4)});const Le=new w(y);m.load("assets/sounds/dropping-bag-95101.mp3",e=>{Le.setBuffer(e),Le.setVolume(.5)});const F=new w(y);m.load("assets/sounds/footsteps.mp3",e=>{F.setBuffer(e),F.setVolume(.4),F.setLoop(!0)});const I=new dt(y);m.load("assets/sounds/zombie-1-22336.mp3",e=>{I.setBuffer(e),I.setLoop(!0),I.setRefDistance(20),I.setVolume(.3)});const Y=new dt(y);m.load("assets/sounds/fluorescent-lamp-flickering-17625.mp3",e=>{Y.setBuffer(e),Y.setRefDistance(3),Y.setVolume(.9),Y.setLoop(!0)});function fo(e){e.add(y)}function ft(e){e.add(I)}function yo(e){e.add(Y),Y.play()}function yt(){U.play()}function po(){J.play()}function mo(){I.play()}function pt(){U.stop(),J.stop(),I.stop()}function go(){ke.play(),Te.play()}function ho(){pt(),Q.play(),ee.play(),I.play()}function wo(){Q.stop(),ee.stop(),I.stop(),go(),yt()}function we(){Ee.play()}function xo(){Be.play()}function bo(){De.play()}function vo(){Le.play()}function Io(){F.isPlaying||F.play()}function To(){F.pause()}let c,u,_e,qe,Xe,Se,je,te,G=!1,Ce=!1;const ko=2,Ue=document.getElementById("infected-bite");function Eo(e,o,n,i="Run_InPlace"){o.load(e,r=>{c=r.scene,c.position.x=-19,c.position.z=1.5,ft(c),n.add(c),c.traverse(function(k){k.isMesh&&(k.castShadow=!0)});const a=r.animations;u=new ct(c),_e=u.clipAction(a[0]),qe=u.clipAction(a[1]),Xe=u.clipAction(a[2]),Se=u.clipAction(a[3]),je=u.clipAction(a[4]),te=u.clipAction(a[5]),u.clipAction(a[6]),i==="Idle"?_e.play():i==="Walk1_InPlace"?qe.play():i==="Walk2_InPlace"?Xe.play():i==="Run_InPlace"?Se.play():i==="Attack"&&je.play()})}function Bo(){Se.stop(),te.loop=eo,te.clampWhenFinished=!0,te.play()}function Do(e,o){if(!c||Ce)return;if(o.start.distanceTo(c.position)<2&&!G){wo(),Bo(),uo(),G=!0;return}if(G){u&&(u.update(e),te.isRunning()||(G=!1,Ce=!0,console.log("Infected is dead"),Ue.style.visibility="visible",setTimeout(()=>{Ue.style.visibility="hidden"},5e3)));return}u&&u.update(e);const n=o.end,i=new t;i.subVectors(new t(n.x,c.position.y,n.z),c.position).normalize(),c.position.add(i.multiplyScalar(ko*e));const r=new t(n.x,c.position.y,n.z);c.lookAt(r)}function Lo(){u&&(u.stopAllAction(),u.uncacheRoot(c),u=null),c&&(c.traverse(e=>{e.isMesh&&(e.geometry.dispose(),e.material.isMaterial?e.material.dispose():Array.isArray(e.material)&&e.material.forEach(o=>o.dispose()))}),c.parent&&c.parent.remove(c),c=null),Ce=!1,G=!1}const So="2231",x=document.getElementById("code-input"),Je=document.getElementById("solved-code-text");function Co(){x.innerText="",Mo()}function Ao(){return x.innerText===So?!0:(x.innerText.length===4&&(x.innerText=""),!1)}function Po(e){x.innerText.length<4&&(x.innerText+=e)}function mt(e){e.key>="0"&&e.key<="9"&&Po(e.key),e.key==="Enter"&&(Ao()?(console.log("Code accepted"),x.innerText="Correct!",Je.style.visibility="visible",en(),Qn(),ho(),setTimeout(()=>{Qo(),x.innerText="",Je.style.visibility="hidden"},3e3)):(console.log("Code rejected"),x.innerText="Wrong!",setTimeout(()=>{x.innerText=""},1e3)))}function zo(){document.addEventListener("keyup",mt)}function Mo(){document.removeEventListener("keyup",mt)}let gt=!1,R=!1,H=!1,ie=!1,_=!1,q=!1,X=!1;const Yo=new l(new t(-7.55,0,-5.5),new t(-5,3,.5)),Ro=new l(new t(-31,0,-28),new t(-29,3,-24)),ht=new l(new t(-37,0,0),new t(-33,3,3.5)),Oo=new l(new t(-13,0,-60),new t(-10.5,3,-57)),Vo=new l(new t(-8,0,-10),new t(-5,3,-7.5)),Wo=new l(new t(-22,0,.6),new t(-19,3,3.5)),wt=document.getElementById("door-text"),xt=document.getElementById("corpse-text"),bt=document.getElementById("file-text"),vt=document.getElementById("report-text"),It=document.getElementById("charles-note-text"),Tt=document.getElementById("code-text"),kt=document.getElementById("exit-prompt"),Et=document.getElementById("door-exam"),Bt=document.getElementById("corpse-exam"),ye=document.getElementById("corpse-timeline"),pe=document.getElementById("report"),me=document.getElementById("charles-note"),$=document.getElementById("faded-screen");ye.style.visibility="hidden";pe.style.visibility="hidden";me.style.visibility="hidden";function No(){R&&(gt?(Dt(),xo(),Z("reception"),R=!1):(bo(),Fo())),H&&(vo(),$o()),_&&(ye.style.visibility==="hidden"?(we(),qo(),Ct(),xe()):(Lt(),St(),b())),q&&(pe.style.visibility==="hidden"?(we(),Xo(),zt(),xe()):(At(),Pt(),b())),X&&(me.style.visibility==="hidden"?(we(),jo(),Rt(),xe()):(Mt(),Yt(),b()))}function xe(){kt.style.display="block"}function b(){kt.style.display="none"}function Fo(){Et.style.visibility="visible"}function Ko(){Et.style.visibility="hidden"}function Zo(){wt.style.visibility="visible"}function Dt(){wt.style.visibility="hidden"}function $o(){Bt.style.visibility="visible"}function Go(){Bt.style.visibility="hidden"}function Ho(){xt.style.visibility="visible"}function _o(){xt.style.visibility="hidden"}function qo(){ye.style.visibility="visible",$.style.visibility="visible"}function Lt(){ye.style.visibility="hidden",$.style.visibility="hidden"}function St(){bt.style.visibility="visible"}function Ct(){bt.style.visibility="hidden"}function Xo(){pe.style.visibility="visible",$.style.visibility="visible"}function At(){pe.style.visibility="hidden",$.style.visibility="hidden"}function Pt(){vt.style.visibility="visible"}function zt(){vt.style.visibility="hidden"}function jo(){me.style.visibility="visible",$.style.visibility="visible"}function Mt(){me.style.visibility="hidden",$.style.visibility="hidden"}function Yt(){It.style.visibility="visible"}function Rt(){It.style.visibility="hidden"}function Uo(){Tt.style.visibility="visible"}function Jo(){Tt.style.visibility="hidden"}function Qo(){ht.makeEmpty()}function en(){gt=!0}function tn(e){e.intersectsBox(Yo)?R||(console.log("Entered the door trigger zone"),Zo(),R=!0):R&&(console.log("Exited the door trigger zone"),Dt(),Ko(),b(),R=!1),e.intersectsBox(Ro)?H||(console.log("Entered the corpse trigger zone"),Ho(),H=!0):H&&(console.log("Exited the corpse trigger zone"),_o(),Go(),b(),H=!1),e.intersectsBox(ht)?ie||(console.log("Entered the code trigger zone"),Uo(),zo(),ie=!0):ie&&(console.log("Exited the code trigger zone"),Jo(),Co(),b(),ie=!1),e.intersectsBox(Oo)?_||(console.log("Entered the file trigger zone"),St(),_=!0):_&&(console.log("Exited the file trigger zone"),Ct(),Lt(),b(),_=!1),e.intersectsBox(Vo)?q||(console.log("Entered the report trigger zone"),Pt(),q=!0):q&&(console.log("Exited the report trigger zone"),zt(),At(),b(),q=!1),e.intersectsBox(Wo)?X||(console.log("Entered the Charles note trigger zone"),Yt(),X=!0):X&&(console.log("Exited the Charles note trigger zone"),Rt(),Mt(),b(),X=!1)}const P=new ut(16777215,20);P.position.set(-8,2.4,-60);function on(e){yo(P),e.add(P)}function Qe(e){return Math.floor(Math.random()*e)}function nn(){P.visible&&Qe(320)==1&&(P.visible=!1),P.visible||Qe(40)==1&&(P.visible=!0)}let E,re,et;function sn(e,o,n,i=new t(0,0,-8),r=new t(0,0,0)){o.load(e,a=>{E=a.scene,E.scale.set(.6,.6,.6),E.position.set(i.x,i.y,i.z),E.rotation.set(r.x,r.y,r.z),ft(E),mo(),n.add(E),E.traverse(function(He){He.isMesh&&(He.castShadow=!0)});const k=a.animations;re=new ct(E),et=re.clipAction(k[0]),et.play()})}function rn(e){re&&re.update(e)}const Ot=document.getElementById("blackscreen"),Vt=document.getElementById("intro-text");function ln(){Ot.style.visibility="visible",Vt.style.visibility="visible"}function an(){Ot.style.visibility="hidden",Vt.style.visibility="hidden"}function dn(e){function o(n){window.removeEventListener("keydown",o),e&&e(n)}window.addEventListener("keydown",o)}const Wt=document.getElementById("drawer1-text"),Nt=document.getElementById("drawer2-text"),le=document.getElementById("gooddrawer-text"),ge=document.getElementById("items-container"),Ft=document.getElementById("blur"),Ae=document.getElementById("bad-text"),Ke=document.getElementById("good-text"),Pe=document.getElementById("searched-text"),ae=document.getElementById("useCard-text"),tt=document.getElementById("noCard-text"),Kt=document.getElementById("dontOpen-text"),cn=document.getElementById("Open-text");let de=!1,ce=!1,z=!1,O=!1,V=!1,ze=!1,D=!1,Me=!1,C;function un(){de&&(f(Wt),W(Ae)),ce&&(f(Nt),W(Ae)),z&!D?(f(le),ze=!0):z&D&Ke.style.visibility=="hidden"?(f(le),W(Pe)):z&D&ge.style.display=="flex"&&(f(Pe),Zt()),O&D&&(f(ae),W(Kt)),V&D&&(f(ae),Me=!0)}function Zt(){de|ce&&f(Ae),z&&(f(Pe),f(Ke),f(le),ge.style.display="none",Ft.style.display="none"),O&&f(Kt),V&&f(cn)}function W(e){e.style.visibility="visible"}function f(e){e.style.visibility="hidden"}const fn=new l(new t(3.3,0,4),new t(6.1,2.8,4.6)),yn=new l(new t(1.5,0,-2.5),new t(2.5,2,-1.5)),pn=new l(new t(-1.7,0,-1.75),new t(-.7,2,-.75)),mn=new l(new t(-.25,0,-1.5),new t(.75,2,-.5)),ot=new l(new t(4.35,0,-4.6),new t(5.85,2,-4.2)),be=new l(new t(-5.5,0,-4.6),new t(-4,2,-4.2));function S(e,o,n,i){if(e.intersectsBox(o)){if(!n)return console.log("Entered the trigger zone"),W(i),!0}else if(n)return console.log("Exited the trigger zone"),f(i),Zt(),!!(z&D&ge.style.display=="flex");return n}function gn(e,o,n){o.load(e,i=>{C=i.scene,C.scale.set(2.3,1.778,1),C.position.set(.2,.739,-.571),C.rotation.y+=Math.PI,n.add(C)})}function hn(e){e.intersectsBox(fn)&&Z("exterior"),e.intersectsBox(be)&Me==!0&&(Me=!1,Z("corridor")),de=S(e,yn,de,Wt),ce=S(e,pn,ce,Nt),z=S(e,mn,z,le),D?(O=S(e,ot,O,ae),V=S(e,be,V,ae)):(O=S(e,ot,O,tt),V=S(e,be,V,tt)),ze&&(C.position.z>-.9?C.position.z-=.01:(W(Ke),ge.style.display="flex",Ft.style.display="block",D=!0,ze=!1))}const M=document.getElementById("openDoor-text"),$t=document.getElementById("closedDoor-text"),Gt=document.getElementById("zombieDoor-text");let Ye=!1,Re=!1,Oe=!1;function wn(){Ye&&(L(M),ue($t)),Oe&&(L(M),Z("room")),Re&&(L(M),ue(Gt))}function Ht(){L(M),L($t),L(Gt)}function ue(e){e.style.visibility="visible"}function L(e){e.style.visibility="hidden"}const xn=new l(new t(1.25,-.05,-14.65),new t(1.75,2.05,-13.85)),bn=new l(new t(3.35,-.05,-14),new t(3.85,2.05,-13.2)),vn=new l(new t(3.35,-.05,-9.8),new t(3.85,2.05,-9)),In=new l(new t(1.25,-.05,-8.7),new t(1.75,2.05,-7.9)),Tn=new l(new t(3.35,-.05,-5.1),new t(3.85,2.05,-4.3)),kn=new l(new t(3.35,-.05,1.094),new t(3.85,2.05,1.894)),En=new l(new t(3.35,-.05,7.5),new t(3.85,2.05,8.3)),Bn=new l(new t(1.25,-.05,2.6),new t(1.75,2.05,3.4)),Dn=new l(new t(1.25,-.05,7.5),new t(1.75,2.05,8.3)),Ln=new l(new t(1.8,0,-16.5),new t(3.3,2.2,-16.1)),Sn=[xn,bn,vn,In,Tn,kn,En];function nt(e,o,n,i){if(e.intersectsBox(o)){if(!n)return console.log("Entered the trigger zone"),ue(i),!0}else if(n)return console.log("Exited the trigger zone"),L(i),Ht(),!1;return n}function Cn(e,o,n,i){let r=!1;for(const a of o)if(e.intersectsBox(a))return n||(console.log("Entered the trigger zone"),ue(i)),!0;return n&!r&&(console.log("Exited the trigger zone"),L(i),Ht()),!1}function An(e){e.intersectsBox(Ln)&&Z("reception"),Ye=Cn(e,Sn,Ye,M),Re=nt(e,Bn,Re,M),Oe=nt(e,Dn,Oe,M)}const Ze=document.getElementById("launchDialogue-text"),$e=document.getElementById("dialogue-container"),Pn=document.getElementById("dialogue-text"),it=document.getElementById("dialogue-speaker"),_t=document.getElementById("blur"),qt=document.getElementById("exit-prompt"),Ge=document.getElementById("pause-overlay"),zn=document.getElementById("pause-text");let fe=!1,he=!1,j=0;const Mn=[{speaker:"Brother",text:"You came all the way here for me? Are you ok?"},{speaker:"You",text:"Of course I did. I just feel a little tired, some creature bit me. But it's ok."},{speaker:"Brother",text:"Bit you...?"},{speaker:"You",text:"Yeah but that's nothing to care about."},{speaker:"Brother",text:"Of course it's something to care about! Let me see your eyes."},{speaker:"Brother",text:"That's what I thought. Your eyes are so red... You're infected."},{speaker:"You",text:"Infected? You mean I'll become one of them?"},{speaker:"Brother",text:"One of us..."},{speaker:"You",text:"You're infected too...?!"},{speaker:"Brother",text:"Yeah, we were only two survivors, my doctor and I. We barricaded ourselves in this corridor."},{speaker:"You",text:"Now that I think about it I saw an infected in the room next door..."},{speaker:"Brother",text:"We tried to leave the hospital but we were attacked, we got infected."},{speaker:"Brother",text:"I don't know why, but my symptoms took a lot longer than his to develop."},{speaker:"Brother",text:"While searching why I resisted to the infection, my doctor found an antidote."},{speaker:"You",text:"Amazing! where is it??"},{speaker:"Brother",text:"That's the problem... Frederic didn't finish the antidote. He needed a last ingredient."},{speaker:"You",text:"Wait, Frederic? Is that the name of your doctor?"},{speaker:"Brother",text:"Yes, why?"},{speaker:"You",text:"I found a paper from a certain Dr. Frederic Bloupin. There was a bottle with it."},{speaker:"Brother",text:"Are you kiding me? So you have the final piece! We can escape from here safely!"},{speaker:"You",text:"Finally some good news..."},{speaker:"Pause",text:"A few moments later..."},{speaker:"You",text:"It's done but..."},{speaker:"Brother",text:"We only have one dose of remedy."},{speaker:"You",text:"..."},{speaker:"Brother",text:"..."},{speaker:"You",text:"You should take it."},{speaker:"Brother",text:"No, you should! You have better chances of survival."},{speaker:"You",text:"But you were here for so long waiting to escape..."},{speaker:"Brother",text:"Take it."},{speaker:"Pause",text:`Make a choice
Press Y to save your Brother. Press N to save yourselve.`}],Yn=[{speaker:"Brother",text:"Go and live a long life. I'll miss you."},{speaker:"Pause",text:`You took the remedy and left the hospital. An infected attacked you and wounded you to death. You died alone in the parking lot of the hospital, while your brother fell asleep for an endless night.
Bad ending...`}],Rn=[{speaker:"Brother",text:"I can't take it, you came all the way here for me..."},{speaker:"You",text:"You are my little brother. It's my duty to protect you."},{speaker:"Pause",text:`Your brother took the remedy. While you helped him escape the hospital, he saw a locker looking quite familiar to him. It was Frederic's locker! You found an other dose of the remedy and escaped together safely.
Congratulations!`}];let oe=Mn;const On=new l(new t(-2.9,0,-4.3),new t(-.5,3.5,-3.7)),Vn=new l(new t(-3,0,-2.5),new t(-1,4,1.5));function Wn(e){e.speaker==="Pause"?($e.style.display="none",Ge.style.display="flex",zn.innerText=e.text):(it.innerText=e.speaker,it.style.color=e.speaker==="You"?"green":"#ffcc00",Pn.innerText=e.text)}function Nn(){Ze.style.visibility="hidden",he=!0,$e.style.display="block",_t.style.display="block",qt.style.display="block",Ge.style.display="none"}function Fn(){Ze.style.visibility="visible",he=!1,$e.style.display="none",_t.style.display="none",qt.style.display="none",Ge.style.display="none"}function Ve(){fe&j<oe.length?(Nn(),Wn(oe[j]),j++):fe&j>=oe.length}function Kn(){he&&Fn()}function Xt(e){j=0,e?(oe=Rn,Ve()):(oe=Yn,Ve())}function Zn(e,o,n,i){if(e.intersectsBox(o)){if(!n)return console.log("Entered the trigger zone"),i.style.visibility="visible",!0}else if(n)return console.log("Exited the trigger zone"),i.style.visibility="hidden",!1;return n}function $n(e){he||(e.intersectsBox(On)&&Z("corridor"),fe=Zn(e,Vn,fe,Ze))}const Gn=new ro,B=new to,d=new oo(70,window.innerWidth/window.innerHeight,.1,1e3);d.rotation.order="YXZ";const jt=document.getElementById("container"),T=new no({antialias:!0});T.setPixelRatio(window.devicePixelRatio);T.setSize(window.innerWidth,window.innerHeight);T.setAnimationLoop(ei);T.shadowMap.enabled=!0;T.shadowMap.type=io;T.toneMapping=so;jt.appendChild(T.domElement);const Hn=80,st=1,We=new ao,s=new co(new t(0,.35,0),new t(0,1,0),.35),N=new ut(16777215,.5),h=new t,v=new t;let K=!1;const g={},se=new lo().setPath("/RAUG-Cahet-Codron/assets/models/");let A=!1,p="exterior",Ne="exterior",rt=!1;const Fe={},ve=document.getElementById("loader"),Ie=document.getElementById("blackscreen");document.addEventListener("keydown",e=>{Fe[e.code]||(g[e.code]=!0,Fe[e.code]=!0)});document.addEventListener("keyup",e=>{g[e.code]=!1,Fe[e.code]=!1});jt.addEventListener("mousedown",()=>{document.body.requestPointerLock()});document.body.addEventListener("mousemove",e=>{document.pointerLockElement===document.body&&(d.rotation.y-=e.movementX/500,d.rotation.x-=e.movementY/500)});document.addEventListener("keyup",e=>{e.code==="KeyE"&&(No(),p==="reception"&&un(),p==="corridor"&&wn(),p==="room"&&Kn())});document.addEventListener("keyup",e=>{e.code==="KeyY"&&p==="room"&&Xt(!0)});document.addEventListener("keyup",e=>{e.code==="KeyN"&&p==="room"&&Xt(!1)});document.addEventListener("keyup",e=>{e.code==="Space"&&p==="room"&&Ve()});window.addEventListener("resize",_n);function _n(){d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),T.setSize(window.innerWidth,window.innerHeight)}function qn(){const e=We.capsuleIntersect(s);K=!1,e&&(K=e.normal.y>0,K||h.addScaledVector(e.normal,-e.normal.dot(h)),e.depth>=1e-10&&s.translate(e.normal.multiplyScalar(e.depth)))}function Xn(e){let o=Math.exp(-4*e)-1;K||(h.y-=Hn*e,o*=.1),h.addScaledVector(h,o);const n=h.clone().multiplyScalar(e);s.translate(n),qn();let i=s.end.clone();i.y+=.8,d.position.copy(i),N.position.copy(s.end)}function lt(){return d.getWorldDirection(v),v.y=0,v.normalize(),v}function at(){return d.getWorldDirection(v),v.y=0,v.normalize(),v.cross(d.up),v}function jn(e){const o=e*(K?25:8);(g.KeyW||g.KeyS||g.KeyA||g.KeyD)&&!A?Io():To(),g.KeyW&&!A&&h.add(lt().multiplyScalar(o)),g.KeyS&&!A&&h.add(lt().multiplyScalar(-o)),g.KeyA&&!A&&h.add(at().multiplyScalar(-o)),g.KeyD&&!A&&h.add(at().multiplyScalar(o)),g.KeyO&&K&&g.Space&&(h.y=15)}function Un(){const e=new l().setFromPoints([s.start,s.end]);p==="exterior"&&tn(e),p==="reception"&&hn(e),p==="corridor"&&An(e),p==="room"&&$n(e)}function Ut(e){console.log("Loading room:",e),Ie.style.visibility="visible",ve.style.visibility="visible",se.load(e,o=>{A=!0,Lo(),B.clear(),We.clear(),B.add(o.scene),B.add(N),We.fromGraphNode(o.scene),o.scene.traverse(n=>{n.isMesh&&(n.castShadow=!0,n.receiveShadow=!0,n.material.map&&(n.material.map.anisotropy=4))}),setTimeout(()=>{ve.style.visibility="hidden",Ie.style.visibility="hidden",A=!1},3e3),pt(),e=="exterior.glb"?(s.start.set(0,.35,0),s.end.set(0,1,0),d.position.copy(s.end),d.rotation.set(0,0,0),yt(),on(B)):e==="reception.glb"?(Ne==="exterior"?(s.start.set(5,.675,3),s.end.set(5,1.325,3),d.rotation.set(0,0,0)):(s.start.set(-4.7,.675,-3.5),s.end.set(-4.7,1.325,-3.5),d.rotation.set(0,Math.PI,0)),d.position.copy(s.end),N.position.copy(s.end),gn("drawer.glb",se,B)):e==="corridor.glb"?(Ne==="reception"?(s.start.set(2.2,.675,-15),s.end.set(2.2,1.325,-15),d.rotation.set(0,Math.PI,0)):(s.start.set(2,.675,8),s.end.set(2,1.325,8),d.rotation.set(0,0,0)),d.position.copy(s.end),N.position.copy(s.end),sn("idle-infected.glb",se,B,new t(-2,0,3.5),new t(0,180,0))):e==="room.glb"&&(s.start.set(0,1.5,-2.6),s.end.set(0,2.15,-2.6),d.rotation.set(0,Math.PI,0),d.position.copy(s.end),N.position.copy(s.end),po())},o=>{console.log(o.loaded/o.total*100+"%")},o=>{console.error("An error occurred while loading the model:",o),ve.style.visibility="hidden",Ie.style.visibility="hidden"})}function Z(e){Ne=p,p=e,Ut(e+".glb")}function Jn(){d.position.y<=-25&&(s.start.set(0,.35,0),s.end.set(0,1,0),s.radius=.35,d.position.copy(s.end),d.rotation.set(0,0,0),N.position.copy(s.end))}function Qn(){Eo("moving-infected.glb",se,B)}fo(d);ln();rt||dn(()=>{rt=!0,an(),Ut(p+".glb")});function ei(){const e=Math.min(.05,Gn.getDelta())/st;for(let o=0;o<st;o++)Do(e,s),rn(e),jn(e),Xn(e),Jn(),nn(),Un();T.render(B,d)}
//# sourceMappingURL=index-Ble-wNRl.js.map
